<script type="text/javascript">
    // Update quantity on click
    $('.update-link').click(function(e) {
         // Prevent the default action of the link
        e.preventDefault();

        // Find the closest parent 'div.row', and then find the preceding 'div.row' that contains the form
        let form = $(this).closest('.row').prev('.row').find('.update-form');
        form.submit();
    });

    // Remove item and reload on click
    $('.remove-item').click(function(e) {
        let csrfToken = "{{ csrf_token }}";
        let itemId = $(this).attr('id').split('remove_')[1];
        
        $.post(`/bag/remove/${itemId}/`, {'csrfmiddlewaretoken': csrfToken})
         .done(function() {
             location.reload();
         });
    });
</script>
